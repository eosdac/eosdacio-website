<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    
      eosDAC | 
    
  </title>
  <meta property="og:title" content="eosDAC">
  <meta property="og:site_name" content="eosDAC">
  <meta name="description" content="The Community-Owned EOS Block Producer and DAC Enabler">
  <meta property="og:description" content="The Community-Owned EOS Block Producer and DAC Enabler">
  <link rel="shortcut icon" type="image/png" href="/assets/favicon.png?1597422787">
  <link href="/assets/styles.css?1597422787s" rel="stylesheet">
  <link href="https://vjs.zencdn.net/7.4.1/video-js.css" rel="stylesheet">
  <link rel="stylesheet" href="/assets/videojs-resolution-switcher.css">
  <link rel="stylesheet"
    href="https://unpkg.com/bootstrap-material-design@4.1.1/dist/css/bootstrap-material-design.min.css"
    integrity="sha384-wXznGJNEXNG1NFsbm0ugrLFMQPWswR3lds2VeinahP8N0zJw9VWSopbjv2x7WCvX"
    crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/bootstrap-material-design-overwrite.css?1597422787">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:100,200,300,400,500,600">
  <link rel="stylesheet" href="/assets/main.css?1597422787">
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="crossorigin="anonymous"></script><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="site.title" /><link rel="alternate" hreflang="en" href="https://eosdac.io">
  <link rel="alternate" hreflang="ko" href="https://eosdac.io/ko/">
  <link rel="alternate" hreflang="zh-hans" href="https://eosdac.io/zh-hans/">
  <link rel="alternate" hreflang="vi" href="https://eosdac.io/vi/">
  <link rel="alternate" hreflang="ja" href="https://eosdac.io/ja/">
  <link rel="alternate" hreflang="es" href="https://eosdac.io/es/">
  <link rel="alternate" hreflang="ru" href="https://eosdac.io/ru/">
  <link rel="canonical" href="https://eosdac.io/">
  <script src="/assets/vconsole.min.js"></script>
  <script>
    // Init vConsole, if the ?debug=true parameter exists
    if(window.location.search.substr(1).indexOf('debug=true') >= 0) {
      var vConsole = new VConsole()
    }
  </script>
</head>
<body><header class="site-header" role="banner" style="border:0">
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark nav-tabs"
    style="background-image:linear-gradient(to right, #4A1289, #7C41BA)">
    <a class="navbar-brand" href="/">
      <img src="/assets/signet-white.svg" height="42" alt="eosDAC">
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse"
      data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
      aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mr-auto">
        
        
        
        
        
        
        <li class="nav-item"><a class="nav-link" href="/why-vote/">
            Why Vote for eosDAC?</a></li>
        
        
        
        
        
        <li class="nav-item"><a class="nav-link" href="/why-join/">
            Why Join eosDAC?</a></li>
        
        
        
        
        
        <li class="nav-item"><a class="nav-link" href="/why-launch/">
            Why Launch a DAC?</a></li>
        
        
        
        <li class="nav-item"><a class="nav-link" href="/community/">
            Community</a></li>
        
        
        
        
        
        <li class="nav-item"><a class="nav-link" href="/token/">
            Token</a></li>
        
        
        
        <li class="nav-item"><a class="nav-link" href="/tools/">
            Tools</a></li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li class="nav-item"><a class="nav-link" href="/wax-news/">
            Wax News</a></li>
        
        
        
        
        
        <li class="nav-item"><a class="nav-link" href="/news/index.html">
            News</a></li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown"
            role="button" data-toggle="dropdown" aria-haspopup="true"
            aria-expanded="false">
            <img src="/assets/flags/en.png" />
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdown">
            
             
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
          </div>
        </li>
      </ul>
      <span class="navbar-text nav-buttons">
        <a href="/why-vote/#voting-matters" class="btn solid light btn-raised scatter-vote-oneclick">
          Vote eosdacserver
        </a>
        <a href="https://members.eosdac.io/" class="btn outline light btn-raised">
          Member Client
        </a>
      </span>
    </div>
  </nav>
</header>
<main class="page-content main" style="padding:0;" aria-label="Content">
      <div class="">
        <div>
<div class="container">
<div class="row" style="margin-top: 20px;">
<div class="col-md-12">
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">En quoi consiste le rôle de Délégué au sein d&#39;eosDAC?</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-10-07T18:16:03+01:00" itemprop="datePublished">Oct 7, 2018
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <center>![](https://cdn.steemitimages.com/DQmdfUG4mGHeoCAm8WyPjQXc7WW2KLKB6cEKcCMQYL1QyT4/image.png)</center>

<h2 id="eosdac">eosDAC</h2>

<p>eosDAC est un candidat  producteur de block EOS (ou du terme anglais block producer EOS) qui a pour mission de financer et de permettre le succès des DACs en fournissant des outils open source et une expertise. Celles-ci incluent une série de smart contracts qui encodent la constitution de la DAC en code exécutable et d’autres supports en matière de gouvernance, de ressources humaines, de réglementation et de conseil.</p>

<p>En tant que Délégué d’eosDAC, vous avez la possibilité d’être d’une grande utilité pour l’évolution de la gouvernance distribuée. Ceux qui acceptent d’endosser ce rôle auront pour mission de guider la DAC eos afin que cette dernière possède les ressources dont elle a besoin pour exécuter sa vision sur la chaîne EOS, sur la blockchain en général et au sein de l’ensemble de la société. Alors qu’eosDAC permet de créer une DAC vivante, nous découvrons et résolvons des problèmes inhérents au développement de ce nouveau modèle novateur de travail open source. Le logiciel EOS.IO est unique et assez sophistiqué pour encoder et traiter ces relations complexes, c’est pourquoi il est important de tester et itérer ce modèle en utilisant EOS.IOn, et pour que cela se fasse avec succès, il est nécessaire d’avoir un conseil de leadership compétent et expérimenté. Enfin, la sauvegarde de la production de bloc et le retour à la production active nécessiteront le leadership et la gestion collective des Délégués.</p>

<h2 id="la-constitution">La Constitution</h2>

<p>La gouvernance d’eosDAC est prescrite par sa [Constitution] (https://github.com/eosdac/constitution/blob/master/constitution.md), lecture essentielle pour tout candidat potentiel. Il est possible que vous souhaitiez également vous référer à [ce blog post au sujet de la Constitution eosDAC] (https://steemit.com/eos/@eosdac/constitution-plain-language-summary),  vous pouvez également parler de ce sujet sur Discord  <a href="https://discord.gg/nfB3HTh">#6-legal-and-governance channel.</a></p>

<h2 id="resonsabilité-globale">Resonsabilité globale</h2>

<p>Les principes de direction d’eosDAC peuvent être trouvés dans la Constitution et ils incluent la cultivation de l’Ecosystème EOS, Ouverture et Transparence, et Justice. Les Délégués sont demandés d’agir en fonction de ces principes.</p>

<h2 id="le-conseil-des-délégués">Le conseil des Délégués</h2>

<p>Le conseil des Délégués est composé de 12 Délégués élus; leur terme est d’une semaine même si nous souhaitons et espérons que beaucoup d’entre eux seront réélus plusieurs fois par les token holders. Les Délégués sont élus par les token holders de manière continue - une capture d’écran  du classement des Délégués est d’ailleurs prise juste avant la formation du prochain conseil des Délégués. Le vote des token holders est proportionnel au nombre de token qu’ils possèdent, comme sur le mainnet.</p>

<h2 id="considération-des-propositions-de-travailleurs-ou-worker-proposals">Considération des propositions de travailleurs (ou worker proposals)</h2>

<p>Les affaires de la DAC sont largement considérées et décidées au travers des propositions de travailleurs. De ce fait, le travail principal des Délégués est de regarder, communiquer avec les autres Délégués et de voter au sujet des propositions de travailleurs.</p>

<p>Le processus d’arbitrage des propositions de travailleurs est susceptible d’inclure ces étapes:</p>

<p>*Vérification du contexte et de l’historique d’une proposition - idéalement, toutes les informations nécessaires seront fournies dans la proposition elle-même, mais il peut parfois être nécessaire de rechercher activement des informations supplémentaires. 
*Discuter et entendre le point de vue des autres Délégués, que ce soit par la voix ou par un message ouvert; si nécessaire, solliciter les commentaires d’autres membres/collègues qui connaissent le travailleur ou le flux de travail dont il est question. 
*Approuver ou refuser la proposition (sur la chaîne)
*Lorsqu’une réclamation est faite (les travailleurs “réclament” la proposition de paiement une fois le produit livrable achevé), les Délégués évaluent si le produit livrable a été achevé avant d’approuver le paiement. Les Délégués peuvent mettre en place des systèmes et des structures au fil du temps pour les aider dans cet exercice de vérification.</p>

<p>Les Délégués peuvent aussi soumettre des propositions qui seront considérées par le Conseil des Délégués.</p>

<h2 id="paiements-autorisés">Paiements autorisés</h2>

<p>Tous les paiements à partir du compte eosDAC EOS nécessitent l’approbation multisig de 9 Délégués sur 12. Les Délégués doivent s’assurer que les paiements résultent de propositions de travailleurs correctement déclarées et complétées, puis approuver le paiement en chaîne.</p>

<p>Les ingénieurs d’eosDAC rendront cette étape aussi conviviale que possible et assureront la liaison avec les Délégués afin de les assister au niveau technique.</p>

<h2 id="communication-et-réunions">Communication et réunions</h2>

<p>Il est envisagé que les Délégués communiqueront les uns avec les autres par message et vocalement sur Discord  mais aussi (Zoom ou similaire) lors de réunions. Un Délégué est considéré comme ayant assisté à une “réunion” si il ou elle a participé de manière à permettre aux autres Délégués présents d’afficher, d’entendre ou d’interagir de toute autre manière avec leurs communications en temps réel. Les Délégués détermineront par eux-mêmes la fréquence et le type d’interaction dont ils ont besoin pour s’acquitter de leurs tâches.</p>

<h2 id="langage">Langage</h2>

<p>La Constitution spécifie que les procédures entre les Délégués se dérouleront en anglais. En effet, l’Anglais est une langue véhiculaire qui est parlée par une aire géographique assez vaste et qui est commune à des locuteurs de diverses langues. Les Délégués qui ne parlent pas Anglais peuvent avoir besoin de faire appel à un traducteur, peut-être quelqu’un au sein même de la DAC.</p>

<h2 id="identification">Identification</h2>

<p>La Constitution stipule que le Conseil des Délégués peut choisir de conserver un enregistrement des coordonnées des Délégués  (tels que l’adresse/ adresse électronique) sous la forme choisie par le Conseil. Le Conseil des Délégués peut également choisir de n’enregistrer aucune information.</p>

<p>Ailleurs, la Constitution indique que le Conseil des Délégués peut demander une pièce d’identité aux Membres s’il le faut pour se conformer aux lois, aux règlements ou à l’arbitrage.</p>

<h2 id="rémunération-des-délégués">Rémunération des Délégués</h2>

<p>Les Délégués sont rémunérés selon le mécanisme suivant: chaque Candidat définit la rémunération (en EOS) qu’il/elle souhaiterait recevoir pour la durée d’une semaine; tous les Délégués élus pour une semaine donnée recevront la médiane des montants proposés par chacun d’eux.</p>

<p>A titre indicatif, le chiffre d’affaires d’eosDAC au moment de l’écriture de ce poste est inférieur à 10 000 EOS par mois; une grande partie de cette somme est payée en tant que travailleur rémunéré pour l’équipe technique de production de blocs, les fonctions communautaires, la gestion du système de la DAC telles que les ressources humaines et les finances, la gestion des médias sociaux, etc. Etant donnée qu’il y a 12 Délégués, une rémunération pouvant aller jusqu’à 50 EOS par semaine constituerait une limite supérieure que la DAC pourrait se permettre en tant que producteur de réserve - Les Délégués prêts à servir moins peuvent être considérés préférentiellement par les électeurs.</p>

<h2 id="risque-et-légal">Risque et légal</h2>

<p>L’équipe fondatrice estime qu’esoDAC ne participera probablement pas à des activitées susceptibles d’attirer une attention légale ou réglementaire: la DAC n’était pas et n’est pas impliquée dans la distribution de tokens, ni dans aucun aspect de l’échange de token; la DAC n’est pas engagée dans des activitées qui pourraientt tomber sous une régulation financière (le test pour lequel tourne autour du stockage ou de la transmission de valeurs appartenant à des tiers).</p>

<p>De plus, l’équipe fondatrice d’eosDAC a pris le plus grand soin de rédiger une Constitution destinée à protéger les Délégués de toute responsabilité déloyale (voir par exemple la clause 3.5, dans laquelle les Membres partagent des responsabilités pour la DAC; clause 6.4 dans laquelle les membres estime qu’ils ont autorisé les décisions prises par le Conseil des Délégués vu qu’ils ont voté pour eux).</p>

<p>Les candidats  doivent néanmoins être conscients que nous sommes en terrain plus ou moins inconnu - c’est pourquoi ce projet est très excitant et, nous pensons, important.</p>

<p>Les Délégués peuvent être des personnes physiques ou morales.</p>

<h2 id="token-staking">Token staking</h2>

<p>Les Délégués vont être amenés à prendre des décisions importantes qui apporteront de meilleurs résultats si leurs motivations sont alignées avec celles de la DAC. Pour cette raison les Délégués sont demandés de déposer un capital minimum [ 50,000 EPSDAC - cette valeur étant en discussion, <a href="https://steemit.com/eos/@eosdac/launching-a-dac-we-value-your-input">aller voir ce poste et faite nous partager votre opinion</a>]  tokens même s’ils sont libres de déposer plus afin de montrer leur engagement; les tokens déposés seront libérés plus tard [3-6 mois (cette durée est en discussion)] après que les Délégués arrêtent de servir au conseil tant qu’aucunes conséquences négatives ne résultent de leur fonction, tel que la fraude financière, procédure judiciaire ou atteinte préjudiciable à la réputation de la DAC.</p>

<p>##Processus de nomination</p>

<p>Avant de vous nommer, veuillez vous assurer que vous êtes un membre enregistré de eosDAC ( ce qui signifie que vous possédez des tokens et que vous vous êtes inscrit à l’adresse https://members.eosdac.io/).</p>

<p>Dès que la nomination d’un Délégué est ouverte - ce qui sera annoncé sur notre site internet et nos réseaux de communication - merci de suivre les étapes simples pour vous présenter sur members.eosdac.io.</p>

<p>Merci !</p>

<ul>
  <li>R.A &amp; S.M</li>
</ul>

<p><img src="https://cdn.steemitimages.com/DQmRQWM3QtQ21wddAMCjbVRhB3rM7L4AGWLY9QpNmkXNLps/Screen%20Shot%202018-06-12%20at%2011.00.55%20PM.png" alt="Screen Shot 2018-06-12 at 11.00.55 PM.png" /></p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/PbQpAJOP6iA" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>

<center><h1>Merci de voter pour  eosdacserver</h1></center>

<p>Abonnez-vous à <a href="https://eosdac.io/news/#newsletter"> notre newsletter</a> pour rester informer et nous suivre via votre réseau social préféré:</p>

<p><sub><a href="https://steemit.com/@eosdac" target="_blank">Steemit</a> | <a href="http://discord.io/eosdac" target="_blank">Discord</a> | <a href="https://t.me/eosdacio" target="_blank">Telegram</a> | <a href="https://facebook.com/eosdac" target="_blank">Facebook</a> | <a href="https://twitter.com/eosdac" target="_blank">Twitter</a> | <a href="https://plus.google.com/+eosdac" target="_blank">Google-plus</a> | <a href="https://github.com/eosdac" target="_blank">Github</a> | <a href="https://instagram.com/eosdac" target="_blank">Instagram</a> | <a href="https://linkedin.com/company/eosdac" target="_blank">Linkedin</a> | <a href="https://medium.com/eosdac" target="_blank">Medium</a> | <a href="https://www.reddit.com/r/EOSDAC/" target="_blank">Reddit</a> | <a href="https://www.youtube.com/eosdac" target="_blank">YouTube</a> | &lt;a href=”http://weibo.com/eosdac” target=”_blank”&gt;Weibo&lt;/a&gt;| <a href="https://vk.com/eosdac" target="_blank">VK</a>| <a href="https://bihu.com/people/586348" target="_blank">Bihu</a></sub></p>

  </div><a class="u-url" href="/2018/10/07/en-quoi-consiste-le-role-de-delegue-au-sein-d-eosdac.html" hidden></a>
</article>

  <a href="https://steemit.com/eos/@p0p0/en-quoi-consiste-le-role-de-delegue-au-sein-d-eosdac">Read more ↗</a><br/><br/>


<a href="/news">Back</a>
</div>
</div>
</div><div style="background-image:url(/assets/footer-bkgr.png);background-repeat:no-repeat;background-size:100% auto;margin-top:50px;">
    <img src="/assets/spacer.gif" style="width:100%;"/>
</div></div>
      </div>
    </main><footer class="site-footer h-card" style="border:0;padding:0;">
  <div class="footer">

    <div class="container">
      <div class="row">
        <div class="col-md-3">
          <h2 id="important-links">Important Links</h2>
<p><a href="http://eepurl.com/dmQ2dX">Newsletter</a><br />
<a href="/why-vote/#core-principles">Code Of Conduct</a><br />
<a href="/history/">eosDAC History</a><br />
<a href="https://eosdac.zendesk.com/">Help Center</a><br />
<a href="/styleguide">Styleguide</a><br />
<a href="https://steemit.com/eos/@eosdac/statement-of-ownership-and-code-of-conduct">Disclosures</a><br />
<a href="/bp.json">BP Info</a></p>

        </div>
		
        <div class="col-md-6">
          <h1 id="sign-up-to-our-newsletter"><a href="http://eepurl.com/dmQ2dX">Sign up to our Newsletter</a></h1>


        <!--  <form id="newsletterForm">
    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label for="name" class="bmd-label-floating">
                    Name
                </label>
                <input type="text" class="form-control" id="name" name="name">
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label for="email" class="bmd-label-floating">
                    Email *
                </label>
                <input type="email" class="form-control" id="email" name="email"
                    required>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <select class="form-control" id="language" name="language" required>
                <option value="">Language *</option>
                <option value="English">&nbsp;&nbsp;&nbsp;&nbsp;English</option>
                <option value="Russian">&nbsp;&nbsp;&nbsp;&nbsp;Pусский</option>
                <option value="Korean">&nbsp;&nbsp;&nbsp;&nbsp;한국어</option>
                <option value="Chinese">&nbsp;&nbsp;&nbsp;&nbsp;简体中文</option>
            </select>
        </div>
        <div class="col-md-6">
            <button type="submit" id="submitButton" class="btn">
                Subscribe
            </button>
        </div>
    </div>
</form>
<script>
$('#newsletterForm').submit(function(event) {
    event.preventDefault();
    $.post('https://toolkit-api.eosdac.io/subscribe', $(this).serialize())
    .done( function(result) {
        if(result && (result.message === 'subscribed_successfully' || result.message === 'already_subscribed')) {
            alert('Thank you, your records have been updated!');
            document.getElementById('newsletterForm').reset();
        } else {
            alert('Error:\n'+JSON.stringify(result));
        }
    })
    .fail( function(xhr, textStatus, errorThrown) {
        alert('Error '+xhr.status+':\n'+xhr.responseText);
    });
});
</script> -->
        </div>
		
        <div class="col-md-3">
          <h2 id="social-media">Social Media</h2>
<p><a href="https://discord.io/eosdac"><i class="icon icon-social-discord-com"></i></a>
<a href="https://github.com/eosdac"><i class="icon icon-social-github-com"></i></a>
<a href="https://steemit.com/@eosdac"><i class="icon icon-social-steemit-com"></i></a>
<a href="https://twitter.com/eosdac"><i class="icon icon-social-twitter-com"></i></a>
<a href="https://www.instagram.com/eosdac"><i class="icon icon-social-instagram-com"></i></a>
<br />
<a href="https://facebook.com/eosdac"><i class="icon icon-social-facebook-com"></i></a>
<a href="https://www.reddit.com/r/eosdac"><i class="icon icon-social-reddit-com"></i></a>
<a href="https://vk.com/eosdac"><i class="icon icon-social-vk-com"></i></a>
<a href="https://www.linkedin.com/company/eosdac/"><i class="icon icon-social-linkedin-com"></i></a>
<a href="https://www.youtube.com/eosdac"><i class="icon icon-social-youtube-com"></i></a>
<br />
<a href="https://murmurdapp.com/userpost/eosdacmurmur"><i class="icon icon-social-murmur"></i></a>
<a href="https://t.me/eosdacio"><i class="icon icon-social-telegram"></i></a></p>

        </div>
      </div>
    </div>

    <div class="container">
      <hr style="padding: 10px 0; border-color: #BABDBE;" /><div class="row">
        <div class="col-md-2">
          <img src="/assets/signet-white.svg" height="50" alt="site.title">
        </div>
        <div class="col-md-10">
          
          
          
          
          <a class="nav-link" href="/why-vote/"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">Why Vote for eosDAC?</a>
          
          
          <a class="nav-link" href="/why-join/"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">Why Join eosDAC?</a>
          
          
          <a class="nav-link" href="/why-launch/"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">Why Launch a DAC?</a>
          
          <a class="nav-link" href="/community/"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">Community</a>
          
          
          <a class="nav-link" href="/token/"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">Token</a>
          
          <a class="nav-link" href="/tools/"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">Tools</a>
          
          
          
          
          
          
          
          
          
          
          
          <a class="nav-link" href="/wax-news/"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">Wax News</a>
          
          
          <a class="nav-link" href="/news/index.html"
            style="text-transform: none; display: inline-block; margin-top: 5px;
            color: white;">News</a>
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          
          </div>
      </div></div>
  </div>
</footer>
<script src="https://vjs.zencdn.net/7.4.1/video.js"></script>
<script src="/assets/videojs-resolution-switcher.js"></script>
<script src="https://unpkg.com/popper.js@1.12.6/dist/umd/popper.js"
  integrity="sha384-fA23ZRQ3G/J53mElWqVJEGJzU0sTs+SvzG8fXVWP+kJQ1lwFAOkcUOysnlKJC33U"
  crossorigin="anonymous"></script>
<script
  src="https://unpkg.com/bootstrap-material-design@4.1.1/dist/js/bootstrap-material-design.js"
  integrity="sha384-CauSuKpEqAFajSpkdjv3z9t8E7RlpJ1UP0lKM/+NdtSarroVKu069AlsRPKkFBz9"
  crossorigin="anonymous"></script>
<script>
$(document).ready(function() {
  $('body').bootstrapMaterialDesign()
  //initialize video players on why-join page
  videojs('why-join-video-1', null, function() {
    var player = this
    window.player = player
    player.on('fullscreenchange', function() {
      if(player.isFullscreen()) {
        label='SD'
        if(screen.width>1280) label='HD'
        player.currentResolution(label)
      } else
        player.currentResolution('SD')
    })
  }).videoJsResolutionSwitcher()
  videojs('why-join-video-2', null, function() {
    var player = this
    window.player = player
    player.on('fullscreenchange', function() {
      if(player.isFullscreen()) {
        label='SD'
        if(screen.width>1280) label='HD'
        player.currentResolution(label)
      } else
        player.currentResolution('SD')
    })
  }).videoJsResolutionSwitcher()
  videojs('why-join-video-3', null, function() {
    var player = this
    window.player = player
    player.on('fullscreenchange', function() {
      if(player.isFullscreen()) {
        label='SD'
        if(screen.width>1280) label='HD'
        player.currentResolution(label)
      } else
        player.currentResolution('SD')
    })
  }).videoJsResolutionSwitcher()
})
</script>
<!-- Voting Modal -->
<div class="modal fade" id="votingModal" tabindex="-1" role="dialog" aria-labelledby="votingModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
    <div class="modal-content">
    <form id="votingForm">
    <div class="modal-header">
        <h5 class="modal-title" id="votingModalLabel">You already selected 30 BPs</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
            Free up one spot, to cast a vote for <code class="highlighter-rouge">eosdacserver</code>
        <br/><br/>
        <div class="container-fluid">
            <div class="row">
                <div class="col-6" style="padding:0;padding-right:10px;" id="voting_col1">
                    <!-- Will be filled via Javascript -->
                </div>
                <div class="col-6" style="padding:0;"  id="voting_col2">
                    <!-- Will be filled via Javascript -->
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <div style="padding: 0 16px;">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            <button type="submit" class="btn solid dark btn-raised">Vote now</button>
        </div>
    </div>
    </form>
    </div>
</div>
</div>

<script src="/assets/eosjs/eosjs-api.js?1597422787"></script>
<script src="/assets/eosjs/eosjs-jsonrpc.js?1597422787"></script>
<script src="https://cdn.scattercdn.com/file/scatter-cdn/js/latest/scatterjs-core.min.js?1597422787"></script>
<script src="https://cdn.scattercdn.com/file/scatter-cdn/js/latest/scatterjs-plugin-eosjs2.min.js?1597422787"></script>
<script src="https://cdn.scattercdn.com/file/scatter-cdn/js/latest/scatterjs-plugin-lynx.min.js?1597422787"></script>
<script type="text/javascript">
// This file needs to be included via the LIQUID template engine, in order to make the translations work!

// Here is how to calculate the vote decay
// https://github.com/eosdac/eosdactoolkit/blob/master/eosdac-material/src/components/vote-eosdac.vue#L126
// https://github.com/eosdac/eosdactoolkit/blob/master/eosdac-material/src/components/vote-eosdac.vue#L169

const host = 'public.eosinfra.io' //TODO: use eu.eosdac.io instead? -> CORS problem
const network = {
    blockchain:'eos',
    protocol:'https',
    host,
    port:443,
    chainId:'aca376f206b8fc25a6ed44dbdc66547c36c6c33e3a119ffbeaef943642f0e906'
}
const EOSDACSERVER = 'eosdacserver'

function castVote(api, account, producers, proxy = "") {
    const transaction = {
        actions: [{
            account: 'eosio',
            name: 'voteproducer',
            authorization: [{ actor: account.name, permission: account.authority, }],
            data: { producers: producers.sort(), proxy, voter: account.name }
        }]
    }
    return api.transact(transaction, { blocksBehind: 3, expireSeconds: 30 })
}

function errHandler(scatter, target, originalContent, err, showAlert = true) {
    console.error('Voting error:', err)
    target.textContent = originalContent
    scatter.logout()

    // Do not show an alert() if the user rejected the transaction on purpose
    const rejected = ['signature_rejected', 'identity_rejected', 'Request Canceled']
    if(err &&  (rejected.includes(err.type) || rejected.includes(err.message))) {
        showAlert = false
    }
    if(showAlert) alert('Error: ' + JSON.stringify(err))
}

function succHandler(scatter, target, msg = 'Thanks for voting!') {
    target.textContent = msg
    scatter.logout() //all done, goodbye!
}

function oneClickVote(scatter, target, originalContent) {
    target.textContent = 'Voting...'

    const rpc = new eosjs_jsonrpc.JsonRpc('https://'+host)
    const api = new eosjs_api.Api({ rpc, signatureProvider:scatter.eosHook(network, null, true) })

    scatter.login({ accounts: [network] }).then(function() {
        const account = scatter.identity.accounts.find(x => x.blockchain === 'eos')
        /*
        We could also use get_table_rows() to get the voter_info,
        but need to make sure that the result is for 'account.name'.
        get_table_rows({
            json: true,
            code: 'eosio',
            scope: 'eosio',
            table: 'voters',
            lower_bound: account.name,
            limit: 1
        })
        */
        api.rpc.get_account(account.name).then(function(data) {
            const vote = data.voter_info
            let proxy = ''
            let producers = []
            // If vote (e.g. account.voter_info) is 'null', the eosio.voters table is empty for this account,
            // i.e. the account never voted before: Just vote for ['eosdacserver'] in this case!
            if(vote !== null) {
                proxy = vote.proxy
                producers = vote.producers
            }
            if(proxy !== '') {
                api.rpc.get_account(proxy).then(function(data) {
                    if(data && data.voter_info && data.voter_info.is_proxy === 1) {
                        const proxy_producers = data.voter_info.producers
                        const eosdacserverVoted = proxy_producers.some(function(bpName) { return bpName === EOSDACSERVER })
                        if(eosdacserverVoted === true) {
                            // Re-cast vote for the current proxy
                            castVote(api, account, [], proxy).then(function(result) {
                                succHandler(scatter, target, 'Voted proxy: ' + proxy)
                            }).catch(function(err) {
                                errHandler(scatter, target, originalContent, err)
                            })
                        } else {
                            // Re-cast vote for the current proxy, but notify user that it does not support eosdacserver
                            castVote(api, account, [], proxy).then(function(result) {
                                succHandler(scatter, target, 'Voted proxy: ' + proxy)
                                alert(proxy + ' does not support eosDAC. Please consider another proxy!')
                            }).catch(function(err) {
                                errHandler(scatter, target, originalContent, err)
                            })
                        }
                    } else {
                        errHandler(scatter, target, originalContent, proxy+" isn't a proxy anymore")
                        alert(proxy + ' is not a proxy anymore. Please choose another proxy!')
                    }
                }).catch(function(err) {
                    errHandler(scatter, target, originalContent, err)
                })
            } else {
                // Check status of all selected producers, e.g. if they are still registered
                Promise.all(producers.map(p => api.rpc.get_producers(true, p, 1))).then(function(responses) {
                    const reg_producers = responses.map(r => r.rows[0].owner)
                    let new_producers = []
                    // Add all selected AND registered producers into the new_producers array
                    producers.forEach(p => {
                        if(reg_producers.some(rp => rp === p)) new_producers.push(p)
                    })
                    producers = new_producers
                    const eosdacserverVoted = producers.some(function(bpName) { return bpName === EOSDACSERVER })
                    if(eosdacserverVoted === true) {
                        // Re-cast vote for current set of producers (including eosdacserver)
                        castVote(api, account, producers).then(function(result) {
                            succHandler(scatter, target)
                        }).catch(function(err) {
                            errHandler(scatter, target, originalContent, err)
                        })
                    } else {
                        if(producers.length < 30) {
                            // Add 'eosdacserver' to producers list and cast a vote
                            producers.push(EOSDACSERVER)
                            castVote(api, account, producers).then(function(result) {
                                succHandler(scatter, target)
                            }).catch(function(err) {
                                errHandler(scatter, target, originalContent, err)
                            })
                        } else {
                            // Show a modal dialog, to let the user remove one existing producer
                            // Set values inside the modal dialog
                            $('#voting_col1').empty()
                            $('#voting_col2').empty()
                            producers.sort().forEach(function(bpName, idx) {
                                const itm = '<div class="custom-control custom-checkbox"><input type="checkbox" class="custom-control-input" name="bp'+idx+'" id="bp'+idx+'" value="'+bpName+'" checked><label class="custom-control-label" style="font-family:monospace;" for="bp'+idx+'">'+bpName+'</label></div>'
                                if(idx < 15) {
                                    $(itm).appendTo('#voting_col1')
                                } else {
                                    $(itm).appendTo('#voting_col2')
                                }
                            })
                            // Register the submit callback, using local variables
                            $('#votingForm').submit(function(ev) {
                                ev.preventDefault()
                                const producers = $("#votingForm").serializeArray().map(function(elem) {
                                    return elem.value
                                })
                                // Add 'eosdacserver' to producers, if user removed one other producer
                                if(producers.length < 30) {
                                    producers.push(EOSDACSERVER)
                                }
                                castVote(api, account, producers).then(function(result) {
                                    $('#votingModal').modal('hide')
                                    succHandler(scatter, target)
                                }).catch(function(err) {
                                    $('#votingModal').modal('hide')
                                    errHandler(scatter, target, originalContent, err)
                                })
                            })
                            // Register the modal's Cancel/Hide handler, using local variables
                            $('#votingModal').on('hide.bs.modal', function (e) {
                                errHandler(scatter, target, originalContent, 'Modal cancelled/hidden.')
                            })
                            // Show the voting modal
                            $('#votingModal').modal('show')
                        }
                    }
                }).catch(function(err) {
                    errHandler(scatter, target, originalContent, err)
                })
            }
        }).catch(function(err) {
            errHandler(scatter, target, originalContent, err)
        })
    }).catch(function(err) {
        errHandler({ logout: function() { /* Scatter not signed in */ }}, target, originalContent, err)
    })
}

function adoptAuthenticatorByUseragent(idx, obj) {
    const originalContent = obj.textContent
    if(originalContent.includes('Scatter')) {
        const UA = window.navigator.userAgent
        // Detect EOS Lynx according to: https://developers.eoslynx.com/mobile
        if(UA === 'EOSLynx IOS' || UA === 'EOSLynx Android') {
            obj.textContent = originalContent.replace('Scatter', 'EOS Lynx')
            console.info('Adopted for EOSLynx.')
        }
    }
}

$(document).ready(function() {
    ScatterJS.plugins( new ScatterEOS(), new ScatterLynx({ Api: eosjs_api.Api, JsonRpc: eosjs_jsonrpc.JsonRpc }) )
    ScatterJS.scatter.connect('eosDAC.io').then(function( connected ) {
        if(!connected) {
            console.error('Scatter could not be found.')
            return false
        }

        // Scatter was successfully connected
        const scatter = ScatterJS.scatter
        //window.ScatterJS = null
        console.info('Scatter connected.')

        // Setup the click handler for '.scatter-vote-oneclick' links
        // and prevent their default (fallback) link/button behaviour,
        // i.e. do not follow their 'href'
        $('.scatter-vote-oneclick').click(function(ev) {
            ev.preventDefault()
            const target = ev.target
            const originalContent = target.textContent
            oneClickVote(scatter, target, originalContent)
        })
        console.info('Scatter handler registered.')

        // Adopt 'Vote using Scatter' button to 'Vote using EOS Lynx' if applicable
        $('.scatter-vote-oneclick').each(adoptAuthenticatorByUseragent)
    })
})
</script>
</body>

</html>
